{{ define "main" }}

{{/* Custom subtitle for single gallery pages */}}
{{ with .Params.custom.index_subtitle }}
<p class="gallery-subtitle" style="text-align: center; font-size: 1.1em; color: var(--text-light); margin: 1rem 0;">{{ . }}</p>
{{ end }}

{{ .Content }}

{{/* Only generate automatic gallery if not disabled */}}
{{- if not .Params.disableAutoGallery -}}
  {{ with .Resources.ByType "image" }}
    <div class="gallery-grid">
      {{ range . }}
        {{ $thumbnail := .Fill "300x300 Smart webp q85" }}
        {{ $large := .Resize "1200x webp q85" }}
        <a href="{{ $large.RelPermalink }}" 
           class="gallery-item glightbox" 
           data-gallery="gallery"
           data-title="{{ .Title }}" 
           data-description="{{ .Params.alt }}">
          <div class="gallery-image-wrapper">
            <img src="{{ $thumbnail.RelPermalink }}" 
                 alt="{{ or .Params.alt .Title }}" 
                 width="300" 
                 height="300" 
                 loading="lazy" 
                 decoding="async" 
                 class="gallery-image">
            <div class="gallery-overlay"></div>
          </div>
        </a>
      {{ end }}
    </div>
  {{ end }}
{{- end -}}

{{ end }}
